<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Slider</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: rgb(1, 1, 17);
            color: #fff;
        }

        .testimonial-section {
            padding: 10px;
            margin-top: 50px;
            background-color: rgba(2, 2, 75, 0.3);
        }

        .main-title {
            font-size: 40px;
            font-weight: 800;
        }

        .desc {
            margin-top: 15px;
            line-height: 1.7;
        }

        .profile-info {
            margin-top: 20px;
            font-size: 22px;
            font-weight: 600;
        }

        /* Image */
        .testimonial-img {
            width: 100%;
            max-width: 300px;
            max-height: 400px;
            object-fit: fill;
            border-radius: 15px;
            /* padding-top: 15px; */
        }

        /* Thumbnails */
        .thumb-container {
            margin-top: 30px;
            text-align: center;
        }

        .thumb {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: fill;
            margin: 8px;
            cursor: pointer;
            padding: 4px;
            background: conic-gradient(#0d6efd 0deg, #ddd 0deg);
            transition: transform 0.2s;
        }

        .thumb:active {
            transform: scale(0.95);
        }

        /* Clamp text */
        .clamp-mobile {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .thumb {
                width: 25px;
                height: 25px;
                margin: 2px;
                padding: 1px;
            }

            .clamp-mobile {
                -webkit-line-clamp: 2;
            }
        }

        .clamp-mobile.expanded {
            -webkit-line-clamp: unset;
        }

        .read-more {
            font-size: 14px;
            /* color: #0d6efd; */
            text-decoration: none;
        }

        @media (min-width: 769px) {
            .read-more {
                display: none !important;
            }
        }
    </style>
</head>

<body>

    <section class="testimonial-section container">

        <div id="testimonialSlider" class="carousel slide" data-bs-ride="false" data-bs-interval="false">
            <div class="carousel-inner">

                <!-- SLIDE 1 -->
                <div class="carousel-item active">
                    <div class="row align-items-center">
                        <div class="col-md-5 text-center ">
                            <img src="/image/Lion.webp" class="testimonial-img">
                        </div>
                        <div class="col-md-7">
                            <div class="main-title">Lion</div>
                            <p class="desc clamp-mobile">
                                The lion, widely recognized as the king of the beasts, is a majestic apex predator that
                                stands out as the most social of all big cats. Living in family groups known as prides,
                                these powerful felines dominate the savannas and grasslands of Africa through remarkable
                                teamwork and strength. Male lions are famous for their impressive manes, which signify
                                maturity and provide protection during territorial disputes, while the sleek lionesses
                                serve as the pride's primary hunters.
                            </p>
                            <button class="read-more btn btn-link p-0 d-none">
                                Read more
                            </button>

                            <div class="profile-info">Wild Animal • <span class="company">Grasslands</span></div>
                        </div>
                    </div>
                </div>

                <!-- SLIDE 2 -->
                <div class="carousel-item">
                    <div class="row align-items-center">
                        <div class="col-md-5 text-center">
                            <img src="/image/Tiger.webp" class="testimonial-img">
                        </div>
                        <div class="col-md-7">
                            <div class="main-title">Tiger</div>
                            <p class="desc clamp-mobile">
                                The tiger, recognized as the world's largest cat species, is a magnificent apex predator
                                known for its striking orange fur and unique black stripes that serve as natural
                                camouflage. Unlike lions, these powerful felines are primarily solitary, preferring to
                                hunt and live alone in diverse habitats ranging from the frozen forests of Russia to the
                                tropical jungles of India. They are exceptional swimmers who often use water to cool off
                                or ambush prey, a rare trait among big cats.
                            </p>
                            <button class="read-more btn btn-link p-0 d-none">
                                Read more
                            </button>

                            <div class="profile-info">Wild Animal • <span class="company">Forsets</span></div>
                        </div>
                    </div>
                </div>

                <!-- SLIDE 3 -->
                <div class="carousel-item">
                    <div class="row align-items-center">
                        <div class="col-md-5 text-center">
                            <img src="/image/Panther.webp" class="testimonial-img">
                        </div>
                        <div class="col-md-7">
                            <div class="main-title">Black Panther</div>
                            <p class="desc clamp-mobile">
                                The black panther is not a separate species but a colloquial term for melanistic
                                variants of the leopard (in Africa and Asia) or the jaguar (in the Americas). These
                                "ghosts of the forest" possess a rare genetic mutation that causes an overproduction of
                                dark pigment, resulting in a sleek black coat that still hides faint, underlying rosette
                                patterns visible only in specific light. Primarily solitary and nocturnal, they are
                                expert stealth hunters that use their dark fur as perfect camouflage in dense, low-light
                                jungles and rainforests.
                            </p>
                            <button class="read-more btn btn-link p-0 d-none">
                                Read more
                            </button>

                            <div class="profile-info">Wild Animal • <span class="company">Rain Forests</span></div>
                        </div>
                    </div>
                </div>

                <!-- SLIDE 4 -->
                <div class="carousel-item">
                    <div class="row align-items-center">
                        <div class="col-md-5 text-center">
                            <img src="/image/Leopard.webp" class="testimonial-img">
                        </div>
                        <div class="col-md-7">
                            <div class="main-title">Leopard</div>
                            <p class="desc clamp-mobile">
                                The leopard (Panthera pardus) is an incredibly adaptable and widespread apex predator
                                found across parts of Africa and Asia in a variety of habitats, from rainforests to
                                deserts. Known for their stunning coat of dark, irregular spots called rosettes, these
                                felines use their patterns as expert camouflage to stalk their prey. Unlike social
                                lions, leopards are primarily solitary and territorial animals that hunt mostly at
                                night.
                            </p>
                            <button class="read-more btn btn-link p-0 d-none">
                                Read more
                            </button>

                            <div class="profile-info">Wild Animal • <span class="company">Forests</span></div>
                        </div>
                    </div>
                </div>



            </div>
        </div>

        <div class="thumb-container">
            <img src="/image/Lion.webp" class="thumb" data-index="0">
            <img src="/image/Tiger.webp" class="thumb" data-index="1">
            <img src="/image/Panther.webp" class="thumb" data-index="2">
            <img src="/image/Leopard.webp" class="thumb" data-index="3">
        </div>

    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const slider = document.getElementById("testimonialSlider");
        const carousel = new bootstrap.Carousel(slider);
        const thumbs = document.querySelectorAll(".thumb");

        const slideDuration = 4000;
        const frameRate = 50;
        const step = 360 / (slideDuration / frameRate);

        let progress = 0;
        let activeIndex = 0;
        let timer;

        function resetThumbs() {
            thumbs.forEach(t =>
                t.style.background = "conic-gradient(#0d6efd 0deg, #ddd 0deg)"
            );
        }

        function animate() {
            progress += step;
            thumbs[activeIndex].style.background =
                `conic-gradient(#0d6efd ${progress}deg, #ddd 0deg)`;

            if (progress >= 360) {
                progress = 0;
                carousel.next();
            }
        }

        function startTimer() {
            clearInterval(timer);
            timer = setInterval(animate, frameRate);
        }

        slider.addEventListener("slide.bs.carousel", e => {
            activeIndex = e.to;
            progress = 0;
            resetThumbs();
            startTimer();
        });

        thumbs.forEach((thumb, index) => {
            thumb.addEventListener("click", () => {
                if (index !== activeIndex) {
                    activeIndex = index;
                    progress = 0;
                    carousel.to(index);
                }
            });
        });

        startTimer();







        function isMobile() {
            return window.innerWidth <= 768;
        }

        function setupReadMore(slide) {
            const text = slide.querySelector(".clamp-mobile");
            const btn = slide.querySelector(".read-more");

            if (!text || !btn) return;

            // Reset state
            text.classList.remove("expanded");
            btn.textContent = "Read more";

            if (!isMobile()) {
                btn.classList.add("d-none");
                return;
            }

            // Force measurement AFTER slide is visible
            requestAnimationFrame(() => {
                if (text.scrollHeight > text.clientHeight) {
                    btn.classList.remove("d-none");
                } else {
                    btn.classList.add("d-none");
                }
            });

            btn.onclick = () => {
                text.classList.toggle("expanded");
                btn.textContent = text.classList.contains("expanded")
                    ? "Read less"
                    : "Read more";
            };
        }

        // Run for FIRST visible slide
        setupReadMore(
            document.querySelector(".carousel-item.active")
        );

        // Run whenever slide changes
        slider.addEventListener("slid.bs.carousel", () => {
            setupReadMore(
                document.querySelector(".carousel-item.active")
            );
        });

        // Handle resize
        window.addEventListener("resize", () => {
            setupReadMore(
                document.querySelector(".carousel-item.active")
            );
        });


    </script>

</body>

</html>
